# rusclimbing-search

Сервис поиска результатов соревнований по скалолазанию в России.

## Описание

Этот проект представляет собой API для поиска и получения результатов соревнований по скалолазанию, проводимых в России. Данные собираются с официальных сайтов и структурируются для удобного доступа через REST-интерфейс.

## Структура проекта

- `api/` — основной код приложения FastAPI
  - `main.py` — точка входа и настройка приложения
  - `db.py` — работа с базой данных
  - `models.py` — модели данных
  - `parser.py` — парсер результатов соревнований
  - `v1/` — маршруты API версии 1
- `core/` — конфигурация приложения
- `schemas/` — Pydantic-схемы для валидации данных
- `services/` — бизнес-логика и сервисы

## Зависимости

- Python 3.9+
- FastAPI
- SQLAlchemy
- BeautifulSoup

## Установка

```bash
pip install .
```

## Запуск

```bash
uvicorn api.main:app --reload
```


## API Эндпоинты

### GET /api/events
Получение списка соревнований с фильтрацией

**Параметры запроса:**
- `start` (опционально) - начальная дата (YYYY-MM-DD)
- `end` (опционально) - конечная дата (YYYY-MM-DD)
- `ranks` (опционально) - массив рангов
- `types` (опционально) - массив типов
- `groups` (опционально) - массив групп
- `disciplines` (опционально) - массив дисциплин

**Пример запроса:**
```bash
curl -X GET "http://localhost:8000/api/events?start=2024-01-01&end=2024-12-31&types=book_competition&groups=adults"
```

### GET /api/events/fetch
Загрузка и сохранение соревнований из источника

**Параметры запроса:**
- `start` (опционально) - начальная дата
- `end` (опционально) - конечная дата
- `ranks` (опционально) - массив рангов
- `types` (опционально) - массив типов
- `groups` (опционально) - массив групп
- `disciplines` (опционально) - массив дисциплин

**Пример запроса:**
```bash
curl -X GET "http://localhost:8000/api/events/fetch?start=2024-01-01&end=2024-12-31"
```

## Параметры фильтрации

### Ранги
- `Всероссийские`
- `Международные`
- `Региональные`

### Типы
- `book_competition` - соревнования
- `book_festival` - фестивали
- `book_learning` - обучение
- `book_train` - тренировки

### Группы
- `adults` - взрослые
до 2026 г.
- `juniors`   - юниоры 18-19 лет
- `older`     - юноши, девушки 16-17 лет
- `younger`   - юноши, девушки 14-15 лет
- `teenagers` - юноши, девушки 10-13 лет 
с 2026 г.
- `v10`       - юноши, девушки 10-12 лет
- `v13`       - юноши, девушки 13-14 лет
- `v15`       - юноши, девушки 15-16 лет
- `v17`       - юноши, девушки 17-18 лет
- `v19`       - юниоры 19-20 лет

### Дисциплины
- `bouldering` - боулдеринг
- `dvoerobye` - двоеборье
- `etalon` - эталон
- `skorost` - скорость
- `trudnost` - трудность
- `sv` - спортивное восхождение
- `mnogobore` - многоборье

## Деплой на Vercel

1. Создайте аккаунт на [Vercel](https://vercel.com/)
2. Установите Vercel CLI:
   ```bash
   npm i -g vercel
   ```
3. Залогиньтесь:
   ```bash
   vercel login
   ```
4. Деплойте проект:
   ```bash
   vercel --prod
   ```